<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Naomi Moraes">
<meta name="dcterms.date" content="2024-12-12">
<meta name="description" content="Statistical data analysis project concering the relationship between heat and income in San Jose, CA">

<title>nmoraescommit - Investigating Temperature and Income in San Jose</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">about</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html"> 
<span class="menu-text">blog</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page-left">
      <h1 class="title">Investigating Temperature and Income in San Jose</h1>
                  <div>
        <div class="description">
          Statistical data analysis project concering the relationship between heat and income in San Jose, CA
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">MEDS</div>
                <div class="quarto-category">Stats</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta column-page-left">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p><a href="https://nmoraescommit.github.io/">Naomi Moraes</a> </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 12, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#data-cleaning" id="toc-data-cleaning" class="nav-link" data-scroll-target="#data-cleaning">Data Cleaning</a></li>
  <li><a href="#data-processing" id="toc-data-processing" class="nav-link" data-scroll-target="#data-processing">Data Processing</a></li>
  <li><a href="#data-visualization-and-analysis" id="toc-data-visualization-and-analysis" class="nav-link" data-scroll-target="#data-visualization-and-analysis">Data Visualization and Analysis</a>
  <ul class="collapse">
  <li><a href="#maximum-daily-temperature-data-distribution" id="toc-maximum-daily-temperature-data-distribution" class="nav-link" data-scroll-target="#maximum-daily-temperature-data-distribution">Maximum Daily Temperature Data Distribution</a></li>
  <li><a href="#proportion-of-hot-days-by-location" id="toc-proportion-of-hot-days-by-location" class="nav-link" data-scroll-target="#proportion-of-hot-days-by-location">Proportion of Hot Days by Location</a></li>
  <li><a href="#mean-income-and-station-location" id="toc-mean-income-and-station-location" class="nav-link" data-scroll-target="#mean-income-and-station-location">Mean Income and Station Location</a></li>
  </ul></li>
  <li><a href="#conclusion-bias-and-limitations" id="toc-conclusion-bias-and-limitations" class="nav-link" data-scroll-target="#conclusion-bias-and-limitations">Conclusion, Bias, and Limitations</a></li>
  <li><a href="#data-access" id="toc-data-access" class="nav-link" data-scroll-target="#data-access">Data Access</a></li>
  <li><a href="#github-repo" id="toc-github-repo" class="nav-link" data-scroll-target="#github-repo">GitHub Repo</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block column-page-left" id="quarto-document-content">





<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p><img src="heat.jpg" class="img-fluid"></p>
<p>Every year, around the months of July through to August, I have noticed an uptick in news articles and government advisories cautioning people about the dangers of increasingly frequent heat waves. (Heatwaves can cause health-related problems, like heat strokes, but it can also increase the burden on water, energy, and transportation services - causing blackouts and gridlock that further exacerbate the problem.) <a href="https://www.who.int/health-topics/heatwaves#tab=tab_1">WHO - Heatwaves</a> As a Bay Area native, and a burgeoning data scientist, with an interest in environmental justice, I wanted to explore the relationship between temperature, income, and location in the Bay Area. (This blog post is an extension of my final project presentation for grad school, for the course EDS222.)</p>
<p>My starting point was quite ambitious - especially for the time span I had allotted myself for this project. A mere 2 weeks! Gathering and cleaning data, creating code to process it, analyzing and visualizing the results - to look at incomes and temperatures around the entirety of the Bay Area was no small task. Furthermore, due to the inland spread of certain counties, like Alameda, inland, there were areas where there would naturally be higher temperatures that may skew the research. Thus, I decided to zoom in on the city of San Jose, in the South Bay.</p>
<p>Through this investigation, I pose multiple questions to try and get a holistic and introductory understanding of the relationship between temperature and median household income, in San Jose, during the years 2005 - 2009. According to <a href="https://www.cbsnews.com/losangeles/news/caltech-heat-disparity-between-low-income-neighborhoods-affluent-areas-higher-temperatures/">MIT</a> “While climate change afflicts the world on a global scale, a new study from Caltech finds that residents of low-income neighborhoods are bearing the brunt of the hotter temperatures.” Through data analysis, I wanted to observe if these assumptions held up in the specific area I was investigating.</p>
</section>
<section id="data-cleaning" class="level2">
<h2 class="anchored" data-anchor-id="data-cleaning">Data Cleaning</h2>
<p>Temperature data across the city of San Jose, was retrieved from the National Centers for Environmental Information, National Oceanic and Atmospheric Administration (NOAA). I utilised the climate data online tool, to pull local climatological data from my county of interest - Santa Clara. While there are a total of four stations in the area, the three stations I found the most promising in terms of recorded time range, location, and geographic relevance were the Moffett Federal Airfield, San Jose Mineta National Airport, and the Reid-Hillview Airport.</p>
<p>This was because there were three stations, quite nicely spread out on a diagonal diameter of the city, which allowed me to gather a temperature data I believed to be representative of a cross-section of the city. The time-range for the recorded historical temperatures included the time-range that I wanted to observe, 2009 - 2024.</p>
<p>The relevant temperature data was downloaded from the website, and was saved as three .csv’s to my local drive. After creating a new GitHub repository <code>eds222_final_project</code>, I cloned it to my IDE and uploaded the .csv’s to the data folder (already placed within the .gitignore of the repository.) I created a script that would clean the data available in <code>data_clean.ipynb</code>. In this process, the temperature data I thought most useful was the ‘HourlyDryBulbTemperature’. While there was ‘DailyMaximumDryBulbTemperature’ and ‘DailyMaximumWetBulbTemperature’ variables, it was not as consistent or as complete as the chosen variable. I further processed the .csv data in my R script <code>temp_income_BA.qmd</code> also available on the same GitHub repository. I selected the highest hourly temperature, per day, and was able to approximate the highest daily dry bulb temperature for the years 2009 - 2023 for all three stations.</p>
<p>The geographic shapefiles, for census tracts within Santa Clara County, were pulled from the TIGER/Shapeline files from the US Census Bureau. The shapefiles were uploaded to the data folder <code>raw_data</code> within the .gitignore. I used the census tract data for the years 2009, 2014, 2019, and 2023. This was to match the GEOIDs and areas of the appropriate American Community Survey 5-year data.</p>
<p>Finally, I required median household income data, which I retrieved using the <code>tidycensus</code> package in R. I retrieved the American Community Survey 5-year data for the years 2005 - 2009, 2010 - 2014, 2015 - 2019, and 2019 - 2023.</p>
</section>
<section id="data-processing" class="level2">
<h2 class="anchored" data-anchor-id="data-processing">Data Processing</h2>
<p>I will walk through a simplified framework of the code I created, for temperatures measured from the San Jose International Airport, 2009.</p>
<ol type="1">
<li>Import temperature, census tract shapefile, and ACS income data.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import temp data</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>sanjose <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">'raw_data'</span>,<span class="st">'sanjose_temp.csv'</span>))</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># import census shapefiles of santa clara county</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>santa_clara_geo_09 <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">read_sf</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">'raw_data'</span>,<span class="st">'2009'</span>,<span class="st">'tl_2009_06085_tract00.shp'</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">GEOID =</span> CTIDFP00) <span class="sc">%&gt;%</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(., <span class="at">select =</span> <span class="sc">-</span> CTIDFP00)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Match census tract with 5 year ACS of median income in the years </span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>nine_income <span class="ot">&lt;-</span> <span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">'tract'</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>                  <span class="at">variables =</span> <span class="st">"B19013_001E"</span>,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>                  <span class="at">state =</span> <span class="st">"CA"</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">county =</span> <span class="st">'Santa Clara'</span>,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">year =</span> <span class="dv">2009</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Select GEOID and median income estimate for ACS dataframe</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>nine_income <span class="ot">&lt;-</span> nine_income[<span class="fu">c</span>(<span class="st">'GEOID'</span>,<span class="st">'estimate'</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Create a point from the station location, matching it to the census tract CRS. Find the census tracts the buffer intersects with.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>sanjose_df <span class="ot">&lt;-</span> <span class="fu">data.table</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">place=</span><span class="fu">c</span>(<span class="st">"San Jose"</span>),</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">longitude=</span><span class="fu">c</span>(<span class="sc">-</span><span class="fl">121.92795137054253</span>),</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">latitude=</span><span class="fu">c</span>(<span class="fl">37.36852024984821</span>))</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>sanjose_sf <span class="ot">=</span> <span class="fu">st_as_sf</span>(sanjose_df, <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"longitude"</span>, <span class="st">"latitude"</span>), </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">crs =</span> <span class="fu">st_crs</span>(santa_clara_geo_09), <span class="at">agr =</span> <span class="st">"constant"</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co"># use intersect to find census tracts within 2 mile radius of temperature sensing points</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>sanjose_buffer <span class="ot">&lt;-</span> <span class="fu">st_buffer</span>(sanjose_sf, <span class="dv">4500</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Find census tracts that intersect with buffer zones</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>sanjose_censustract_09 <span class="ot">&lt;-</span> <span class="fu">st_intersection</span>(sanjose_buffer, santa_clara_geo_09)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="tract.png" class="img-fluid figure-img" width="336"></p>
<figcaption>Buffered census tracts around the three stations</figcaption>
</figure>
</div>
<ol start="3" type="1">
<li>Join your appropriate income table to the census tract - to the buffered census tracts. This will find the median income per census tract in the buffered zone around the station. Find the mean of the median incomes for the selected years. (Given the time constraints, I assumed that the income variable would be applicable to a five year time period (e.g.&nbsp;the mean of the 2014 ACS median household income would be applied to the years of 2010 to 2014.))</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find census tracts that intersect with buffer zones</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>sanjose_income_09 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(sanjose_censustract_09, nine_income, <span class="at">by =</span> <span class="st">'GEOID'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(., <span class="at">select =</span> <span class="fu">c</span>(place, estimate)) <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>()</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>sanjose_income_09_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(sanjose_income_09<span class="sc">$</span>estimate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="4" type="1">
<li>Finally, add mean, median incomes to your finished data frame containing station, year, maximum daily temperature, whether the maximum was over 90 degrees Farenheit, and mean, median income. Repeat for all stations over all selected census years - to create the following:</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="finaldf.jpg" class="img-fluid figure-img"></p>
<figcaption>Final dataframe of variables for analysis</figcaption>
</figure>
</div>
</section>
<section id="data-visualization-and-analysis" class="level2">
<h2 class="anchored" data-anchor-id="data-visualization-and-analysis">Data Visualization and Analysis</h2>
<section id="maximum-daily-temperature-data-distribution" class="level3">
<h3 class="anchored" data-anchor-id="maximum-daily-temperature-data-distribution">Maximum Daily Temperature Data Distribution</h3>
<p>Let’s take an initial look into our temperature data by station, for the years 2009 to 2023.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="dist.jpg" class="img-fluid figure-img" width="377"></p>
<figcaption>Distributions of temperature data</figcaption>
</figure>
</div>
<p>The above histograms show the frequency distribution of the maximum daily temperature (in degrees Farenheit) for the San Jose Mineta International Airport, Moffett Federal Airfield, and Reid-Hillview Aiport - between the years 2009 and 2023. The distributions seem to be fairly symmetrical and unimodal.</p>
</section>
<section id="proportion-of-hot-days-by-location" class="level3">
<h3 class="anchored" data-anchor-id="proportion-of-hot-days-by-location">Proportion of Hot Days by Location</h3>
<p>Here we we will visualize the proportion of days, by station, that were recorded to be equal to or greater than 90 degrees Farenheit.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="prop.jpg" class="img-fluid figure-img" width="324"></p>
<figcaption>Proportion of hot days by station</figcaption>
</figure>
</div>
<p>We will use a Pearson’s chi-square test, to analyse the whether the frequency of hot days are similar or different in the three locations. Our test fits all the assumptions of a chi-square test: ” … test a hypothesis about one or more categorical variables. …The sample was randomly selected from the population. There are a minimum of five observations expected in each group or combination of groups.” <a href="https://www.scribbr.com/statistics/chi-square-tests/">Scribber</a></p>
<section id="hypothesis" class="level4">
<h4 class="anchored" data-anchor-id="hypothesis">Hypothesis</h4>
<p><em>H<sub>0</sub></em>: The proportion of days of 90 degrees Celsius or higher, measured at San Jose, Moffett and Reid-Hill from 2009 - 2023, are the same.</p>
<p><em>H<sub>A</sub></em>: The proportion of days of 90 degrees Celsius or higher, measured at San Jose, Moffett and Reid-Hill from 2009 - 2023, are different.</p>
</section>
<section id="create-table" class="level4">
<h4 class="anchored" data-anchor-id="create-table">Create Table</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="chi.png" class="img-fluid figure-img" width="175"></p>
<figcaption>Chi squared table for test</figcaption>
</figure>
</div>
</section>
<section id="chi-squred-test-result" class="level4">
<h4 class="anchored" data-anchor-id="chi-squred-test-result">Chi-Squred Test Result</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="chiresult.png" class="img-fluid figure-img" width="395"></p>
<figcaption>Chi Squared test result</figcaption>
</figure>
</div>
<p>Assuming an alpha of 0.05, as the calculated p-value is less, there is strong evidence that we can reject the null hypothesis.</p>
</section>
</section>
<section id="mean-income-and-station-location" class="level3">
<h3 class="anchored" data-anchor-id="mean-income-and-station-location">Mean Income and Station Location</h3>
<p>Perform a hypothesis test by randomization to investigate whether mean incomes vary by location.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="meanincome.png" class="img-fluid figure-img" width="316"></p>
<figcaption>Distribution of mean, median incomes by location</figcaption>
</figure>
</div>
<p><em>H<sub>0</sub></em>: There is no difference between the mean incomes of the reid-hill and moffett census tracts.</p>
<p><em>H<sub>A</sub></em>: There is a difference between the mean incomes of the reid-hill and moffett census tracts.</p>
<p>Use randomization to simulate the distribution of the sample statistic under the null hypothesis.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="meanstat.png" class="img-fluid figure-img" width="409"></p>
<figcaption>Sample Statistic under Null Hypothesis</figcaption>
</figure>
</div>
<p>Under this randomization test, our calculated p-value is 0. As it is lower than our assumed alpha of 0.05, we can assume that there is strong evidence that we can reject the null hypothesis.</p>
</section>
</section>
<section id="conclusion-bias-and-limitations" class="level2">
<h2 class="anchored" data-anchor-id="conclusion-bias-and-limitations">Conclusion, Bias, and Limitations</h2>
<p>Through this preliminary investigation, we have drawn the conclusion that there is a significant difference in the number of days where the maximum daily temperature are equal to or greater than 90 degrees Fahrenheit, by station - over the years 2009 to 2023. We have also concluded that there is a difference in the means of the median incomes in the census tracts surrounding the temperature sensing stations in a circular zone - with a radius of 4500 m.</p>
<p>Next steps I would like to take, to further explore the relationship between temperature and income in San Jose, would be to create a regression model function that may explain the interaction more directly. However, I would need more robust median income data (e.g.&nbsp;median income date for all years from 2009 to 2023). I would also like to see the temporal relationship between median income and maximum daily temperature, to see if the course of these interactions over the time-period desired.</p>
<p>Limitations I encountered, whilst working on this project, were hard timelines and data availability. Due to the timeline of this project, I narrowed my scope as well as made the decision to not have as a robust dataset as I would have ideally liked - for cenusus tract median income. I would have also preferred to have a couple more locations, that recorded the daily maximum temperature, around the city of San Jose.</p>
<p>These external and internal limitations will have caused bias impacts upon the dataset. As San Jose temperature monitors showed the temperature of a nice cross-section of the city and was documented well, it played a roled into why I chose this location for study. I have also had previous knowledge of the disparities in income, spatially, through the <a href="https://screeningtool.geoplatform.gov/en/#3/33.47/-97.5">Climate and Economic Justice Screening Tool</a>. Thus, at the very least availability and confirmation bias are present in my analysis.</p>
<p>This project and the subsequent results have definitely increased my interest in the subject and I would like to improve and build upon this framework for future research. I would also like to expand this study, in order to get a better sense of the correlation of median income and maximum daily temperatures in the wider Bay Area. I would also like to investigate whether it’s the chicken or the egg: Do areas with higher incomes tend to have cooler ambient temperatures due to investment in cooling infrastructure and green space urban planning or do more affluent neighborhoods tend to be built in cooler areas? Are there historical redlining impacts that cause low income communities to tend to be in hotter areas of cities/counties? Looking at remotely sensed data, it does appear that there are widespread race and class disparities in urban surface heat temperatures <a href="https://agupubs.onlinelibrary.wiley.com/doi/10.1029/2021EF002016">Benz, S. A., &amp; Burney, J. A. (2021)</a> How can we mitigate heat-factors to most effectively help elderly communities, BIPOC, and rural areas?</p>
</section>
<section id="data-access" class="level2">
<h2 class="anchored" data-anchor-id="data-access">Data Access</h2>
<p>All data required to run the code is placed in the /data and /raw_data folder, in the .gitignore of the repo.</p>
<p>If you would prefer to choose your own locations or personally download the data to your server please refer to the following citations:</p>
<p>NOAA Local Climatological Data: National Centers for Environmental Information (NCEI). (n.d.). Local Climatological Data (LCD) | Data Tools | Climate Data Online (CDO) | National Climatic Data Center (NCDC). Climate Data Online (CDO). <a href="https://www.ncei.noaa.gov/cdo-web/datatools/lcd">https://www.ncei.noaa.gov/cdo-web/datatools/lcd</a></p>
<p>Census Tract Shapefiles: US Census Bureau. (2024, October 9). TIGER/Line shapefiles. Census.gov. <a href="https://www.census.gov/geographies/mapping-files/time-series/geo/tiger-line-file.html">https://www.ncei.noaa.gov/cdo-web/datatools/lcd</a></p>
<p>Median Income from Tidycensus: Walker K, Herman M (2024). tidycensus: Load US Census Boundary and Attribute Data as ‘tidyverse’ and ‘sf’-Ready Data Frames. R package version 1.6.6, <a href="https://walker-data.com/tidycensus/">https://www.ncei.noaa.gov/cdo-web/datatools/lcd</a>.</p>
</section>
<section id="github-repo" class="level2">
<h2 class="anchored" data-anchor-id="github-repo">GitHub Repo</h2>
<p><a href="https://github.com/nmoraescommit/eds222_final_project">Access the unfiltered code here!</a></p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{moraes2024,
  author = {Moraes, Naomi},
  title = {Investigating {Temperature} and {Income} in {San} {Jose}},
  date = {2024-12-12},
  url = {https://nmoraescommit.github.io/blog/2024-10-18-heat-income-sj},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-moraes2024" class="csl-entry quarto-appendix-citeas" role="listitem">
Moraes, Naomi. 2024. <span>“Investigating Temperature and Income in San
Jose.”</span> December 12, 2024. <a href="https://nmoraescommit.github.io/blog/2024-10-18-heat-income-sj">https://nmoraescommit.github.io/blog/2024-10-18-heat-income-sj</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2024, Naomi Moraes</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>This website is built with <i class="fa-brands fa-github" title="The GitHub octocat logo" aria-label="github"></i></p>
</div>
  </div>
</footer>




</body></html>